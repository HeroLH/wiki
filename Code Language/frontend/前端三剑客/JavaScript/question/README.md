## es6 填的语法坑

### let 和 var

&emsp;&emsp;es6 新增了 let 命令，用来声明变量。它的用法类似于 var，但是==所声明的变量，只在 let 命令所在的代码块内有效。==

```javascript
var a = [];
for (var i = 0; i < 10; i++) {
  a[i] = function () {
    console.log(i);
  };
}
a[6]();
// 输出结果:10
```

&emsp;&emsp;上面代码中，变量 `i` 是 var 命令声明的，在全局范围内都有效，所以全局只有一个变量 `i`。每一次循环，变量 `i` 的值都会发生改变，而**循环内被赋给数组 `a` 的函数内部的`console.log(i)` ，里面的 `i` 指向的就是全局的 `i`**。也就是说，所有数组`a`的成员里面的`i`，指向的都是同一个`i`，导致运行时输出的是最后一轮的`i`的值，也就是 10
&emsp;&emsp;如果使用`let`，声明的变量仅在块级作用域内有效，最后输出的是 6

```javascript
var a = [];
for (let i = 0; i < 10; i++) {
  a[i] = function () {
    console.log(i);
  };
}
a[6]();

// 输出结果:6
```

上面代码中，变量`i`是 let声明的，当前的`i`只在本轮循环有效，所以每一次循环的`i`其实都是一个新的变量，所以最后输出的是`6`。你可能会问，如果每一轮循环的变量`i`都是重新声明的，那它怎么知道上一轮循环的值，从而计算出本轮循环的值？这是因为 JavaScript 引擎内部会记住上一轮循环的值，初始化本轮的变量`i`时，就在上一轮循环的基础上进行计算



