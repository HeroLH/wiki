> *Made By Herolh*

----------------------------------------------

# 目录 {#index}

[TOC]











--------------------------------------------

# 初识 WebSocket

[博客园 - 武沛奇 - 你真的了解 WebSocket 吗](https://www.cnblogs.com/wupeiqi/p/6558766.html)

## WebSocket 的基本介绍

### 什么是 WebSocket

> &emsp;&emsp;WebSocket 协议是基于 TCP 的一种新的协议。WebSocket 最初在HTML5 规范中被引用为 TCP 连接，作为基于 TCP 的套接字 API 的占位符。它实现了浏览器与服务器全双工( full-duplex )通信。其本质是保持 TCP 连接，在浏览器和服务端通过 Socket 进行通信。

```shell
http 是一个网络协议( 无状态短链接 )
https 是一个网络协议( 无状态短链接 )
websocket  是一个网络协议( 让浏览器和服务端创建链接支持，默认不再断开， 两端就可以完成互相之间的收发数据 )
```





# WebSocket 的实现原理

握手环节

> 验证服务端是否支持 websocket 协议

```shell
浏览器生成一个随机字符串，并将随即字符串发送给服务端
服务端收到随机字符串后，让它和全球公认的魔法字符串进行拼接，在进行 sha1 加密，再进行 base64 加密
将密文返回给拥护浏览器
拥护浏览器自动化进行校验
```

收发数据，密文

```shell
数据解密时需要读取数据第 2 个字节的后 7 位，如果

127

126

<= 125
```







